# 中台

起初，企业只有一个主营业务，比如电商，但随着公司战略和发展需要，会新增多支业务线，由于存在负责业务线开发的团队不一致，随之而来的就是风格迥异的代码风格和数据烟囱问题。

数据中台的产生就是为了解决数据烟囱的问题，打通数据孤岛，让数据活起来，让数据产生价值，结合前台能力，达到快速响应用户的目标。

中台只会同步能服务于超过两个业务线的数据，如果仅仅带有自身业务属性(不存在共性)的数据，不在中台的考虑范围内。例如:电商的产品产地信息，对于金融业务来说，其实是没有价值的，但电商的用户收货地址对金融业务来说是有价值的。所以不要简单的认为数据中台会汇集企业的所有数据，还是有侧重点的。 导致这个结果的原因还包括数据中台建设本身是一个长周期的事，如果数据仅仅作用于一方，由业务方(前台)自行开发，更符合敏捷开发的特性。

关于何时应该建立数据中台这个问题，我的思考是这样的。复杂的业务线、丰富的数据维度和公司上层领导主推。三者缺一，都没有实行的必要。

一只手都能数的过来的业务线量，跨多个项目的需求相对还是比较少的，取数也比较方便，直接走接口方式基本就能满足。反而，通过数据中台流转，将问题复杂化了。

数据的维度越丰富，数据的价值越大。只知道性别数据，与知道性别和年龄，所得到的用户画像，肯定是维度丰富的准确性高。维度不丰富的情况下，没有计算的价值。

可能会很奇怪为什么一定需要公司上层的同意。这里涉及到动了谁的奶酪的问题，数据是每个业务线最重要的资源，在推行中台过程中，势必会遇到阻力，只有成为全公司的战略任务，才有可能把事情做好。

中台如果没有考虑通用的业务能力，也会导致无法更专注于对中台技术的深入研究。中台如果不从抽象度、适配性等角度出发，投入建设机制性的工作，很有可能局限于某单一业务，导致中台无法很好地适应其他相关业务的要求，从而不能很好地应对业务的变化。如果中台的抽象程度低、扩展性差，则会导致中台无法满足前台业务需求。这时前台应用又因为业务本身的发展目标和压力不得不自行组织团队完成这部分功能，由此可能发生本应由中台提供的能力却最终实现在业务应用中。

## 从大数据平台到数据中台过程中的心态转变

以往是业务方主导，提需求给大数据平台，大数据更多的是做幕后工作，听之任之。有时候，想要抽取一些业务方的数据，还涉及与业务方扯皮，身心俱疲，可能做大数据的是最先实现脱发指标的程序员之一吧。但数据中台时代，这方面都发生了转变，数据中台作为一个企业级的战略，将得到全公司的资源支持和推动，数据将作为驱动业务发展的关键点。

数据中台是基于为更快的响应用户，虽然，网上有很多声音侧重说数据的复用性，我不觉得不正确，也不觉得正确，为什么这么说呢，中台确实是在做提高数据复用性这件事，但我觉得应该多问一个为什么，提高数据复用性只是一个现象，而不是最终目的，目的还是更好的服务业务和快速响应用户需求。从更高的维度思考中台，会更好理解中台的存在意义与价值。

在数据中台建设过程中需要解决数据平台存在的效率问题，协作问题问题。以往出一个报表，就可能需要一周甚至更多时间，这么长的周期时间肯定是无法做到快速响应用户的，我们需要提供抽象灵活的架构和解决方案，以降低对实时性要求高的需求场景的开发周期，比如：统一的数据查询接口、标签管理系统、SQL化查询支持。业务开发人员与数据开发人员往往是两个不同的团队，沟通成本是非常高，而且存在反复的问题，在数据中台可以通过元数据管理、数据血缘、数据地图等方案去降低沟通成本。

数据中台在采集和再生产过程中存在大量的数据，期间存在很多敏感信息，这部分数据不应该被大量的低权限者获取到，我认为在中台建设初期，数据安全方面需要被优先考虑，从前段时间爬虫事件可以看出，在国家层面对数据安全方面也是非常重视。如何保证用户数据的安全将成为一家公司的基准线。之前在设计中台过程中，我有幸考察了多家提供数据中台能力解决方案公司，部分公司对自己的产品过度包装，而在数据安全和数据权限方面出现了失焦，一些能力还处于研发阶段或者还没有对其考虑。对于这类公司都存在一个共性——重视功能堆叠，快速套现，没有站在用户的角度考虑问题。

以前大数据平台由于远离业务核心，与业务系统相互之间不存在紧密的交互，而数据中台无论从数据的来源和数据的产出的两端都是业务，考虑如何低成本、无感知地汇集数据和统一便捷的数据输出方式是非常重要的。业务方不会关心你数据中台做了哪些事，是按时下班，还是加班完成的，但关心对他们自己有什么开发成本或者学习成本。中台需要站在业务的角度思考解决方案，比如：binlog 同步方案、离线同步、API 查询接口、SQL 化查询之类的低成本和高效的对接方案肯定将会成为主流。

总结一下，架构的变化，必定是底层的逻辑发生了变更，了解和清楚底层逻辑的变化，才能更好的理解架构变化和优化架构。

### 数据血缘

业务场景：

- 出现数据偏差，寻找哪个环节出现了问题

### 数据资源目录

业务场景：

- 多个部门或者机构之间，知道有哪些数据，分别放在哪里，表结构是怎样的，从而去找相应的人申请相应的资源权限

### 数据质量

- 表中的某一个字段，不应该值为空的，如果值为空会导致应用报错失败，那就应该要提前做相应的处理或报警
- 字段是枚举值，突然有一条数据的出现超出了范围
- 本来从在主从关系的数据，数据上对不上号

数据质量评价指标

- **Completeness：完整性**，用于度量哪些数据丢失了或者哪些数据不可用
- **Conformity：规范性**，用于度量哪些数据未按统一格式存储
- **Consistency：一致性**，用于度量哪些数据的值在信息含义上是冲突的
- **Accuracy：准确性**，用于度量哪些数据和信息是不正确的，或者数据是超期的
- **Uniqueness：唯一性**，用于度量哪些数据是重复数据或者数据的哪些属性是重复的
- **Integration：关联性**，用于度量哪些关联的数据缺失或者未建立索引

那么评估模型应该有这么几个要素：

- **Dataset：被评估的数据集**，对于关系型数据库来说就是一张表
- **Indicators：评估指标**，就是上面列出来的6个指标
- **Rule：评估规则**，与上面的评估指标对应，后续会根据规则的描述来编写脚本。
- **Weight：权重**，此处的权重是每一条评估规则在全部规则的所占比重
- **Expectation：期望**，根据每个评估规则给出一个评估前的期望值（0-100）
- **Score：结果**，每个评估规则应用到数据集后计算出来的结果值（0-100）

https://insights.thoughtworks.cn/data-quality-management/

### 数据共享交换

数据共享包括组织内部和组织之间的数据共享，共享方式也分为库表、文件和 API 接口三种共享方式，库表共享比较直接粗暴，文件共享方式通过 ETL 工具做一个反向的数据交换也就可以实现。我们比较推荐的是 API 接口共享方式，在这种方式下，能够让中心数据仓库保留数据所有权，把数据使用权通过 API 接口的形式进行了转移。API 接口共享可以使用 API 网关实现，常见的功能是自动化的接口生成、申请审核、限流、限并发、多用户隔离、调用统计、调用审计、黑白名单、调用监控、质量监控等等。

### 元数据

起源平台为了实现元数据信息的管理，设计了四个模块实现，分别是：数据表管理模块、模型管理模块、指标管理模块、维度管理模块。

https://tech.meituan.com/2018/12/27/onedata-origin.html